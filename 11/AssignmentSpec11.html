<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>11 --- Implementing the Tournament Manager</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Software Development</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="abstract.html" class="tocviewlink" data-pltdoc="x">Abstract</a></td></tr><tr><td align="right"></td><td><a href="general.html" class="tocviewlink" data-pltdoc="x">General</a></td></tr><tr><td align="right"></td><td><a href="schedule.html" class="tocviewlink" data-pltdoc="x">Schedule</a></td></tr><tr><td align="right"></td><td><a href="lectures.html" class="tocviewlink" data-pltdoc="x">Lectures</a></td></tr><tr><td align="right"></td><td><a href="readings.html" class="tocviewlink" data-pltdoc="x">Readings</a></td></tr><tr><td align="right"></td><td><a href="communication.html" class="tocviewlink" data-pltdoc="x">Communication</a></td></tr><tr><td align="right"></td><td><a href="lab.html" class="tocviewlink" data-pltdoc="x">Lab Book</a></td></tr><tr><td align="right"></td><td><a href="projects.html" class="tocviewlink" data-pltdoc="x">Projects, General</a></td></tr><tr><td align="right"></td><td><a href="assignments.html" class="tocviewselflink" data-pltdoc="x">Projects, Specifics</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td></td><td><a href="assignments.html" class="tocviewlink" data-pltdoc="x">Projects, Specifics</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="readme.html" class="tocviewlink" data-pltdoc="x">Read Me</a></td></tr><tr><td align="right"></td><td><a href="testme.html" class="tocviewlink" data-pltdoc="x">Test Me</a></td></tr><tr><td align="right"></td><td><a href="resources.html" class="tocviewlink" data-pltdoc="x">Resources</a></td></tr><tr><td align="right"></td><td><a href="santorini.html" class="tocviewlink" data-pltdoc="x">Santorini</a></td></tr><tr><td align="right"></td><td><a href="1.html" class="tocviewlink" data-pltdoc="x">1 &#8212;<wbr></wbr> Your Favorite Programming Language</a></td></tr><tr><td align="right"></td><td><a href="2.html" class="tocviewlink" data-pltdoc="x">2 &#8212;<wbr></wbr> Exploring Your Favorite Programming Language</a></td></tr><tr><td align="right"></td><td><a href="3.html" class="tocviewlink" data-pltdoc="x">3 &#8212;<wbr></wbr> Exploring Your Favorite Programming Language Some More</a></td></tr><tr><td align="right"></td><td><a href="fest3.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Week 3 Test Results</span></a></td></tr><tr><td align="right"></td><td><a href="4.html" class="tocviewlink" data-pltdoc="x">4 &#8212;<wbr></wbr> Implementing Protocols, Analyzing the Project</a></td></tr><tr><td align="right"></td><td><a href="4fest.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Week 4 Grades</span></a></td></tr><tr><td align="right"></td><td><a href="5.html" class="tocviewlink" data-pltdoc="x">5 &#8212;<wbr></wbr> Designing Interfaces for the Common Ontology</a></td></tr><tr><td align="right"></td><td><a href="6.html" class="tocviewlink" data-pltdoc="x">6 &#8212;<wbr></wbr> Implementing Common Pieces</a></td></tr><tr><td align="right"></td><td><a href="6fest.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Week 6 Test Results</span></a></td></tr><tr><td align="right"></td><td><a href="7.html" class="tocviewlink" data-pltdoc="x">7 &#8212;<wbr></wbr> Implementing <span class="strike" style="text-decoration:line-through">the Player Interface and</span> the Rule Checker</a></td></tr><tr><td align="right"></td><td><a href="7fest.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Week 7 Test Results</span></a></td></tr><tr><td align="right"></td><td><a href="8.html" class="tocviewlink" data-pltdoc="x">8 &#8212;<wbr></wbr> Implementing the Player&rsquo;s <span class="strike" style="text-decoration:line-through">and its</span> Strategy</a></td></tr><tr><td align="right"></td><td><a href="8fest.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Week 8 Test Results</span></a></td></tr><tr><td align="right"></td><td><a href="9.html" class="tocviewlink" data-pltdoc="x">9 &#8212;<wbr></wbr> Implementing the Referee</a></td></tr><tr><td align="right"></td><td><a href="9fest.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Week 9 Code Inspection Results</span></a></td></tr><tr><td align="right"></td><td><a href="10.html" class="tocviewlink" data-pltdoc="x">10 &#8212;<wbr></wbr> Implementing an Observer</a></td></tr><tr><td align="right"></td><td><a href="10fest.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Week 10 Test Results</span></a></td></tr><tr><td align="right"></td><td><a href="" class="tocviewselflink" data-pltdoc="x">11 &#8212;<wbr></wbr> Implementing the Tournament Manager</a></td></tr><tr><td align="right"></td><td><a href="11fest.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Week 11 Test Results</span></a></td></tr><tr><td align="right"></td><td><a href="12.html" class="tocviewlink" data-pltdoc="x">12 &#8212;<wbr></wbr> Implementing Tournament Observers&#8212;<wbr></wbr><span style="color: red">Bonus</span></a></td></tr><tr><td align="right"></td><td><a href="12fest.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Week 12 Code Inspection Results</span></a></td></tr><tr><td align="right"></td><td><a href="13.html" class="tocviewlink" data-pltdoc="x">13 &#8212;<wbr></wbr> Implementing Remote Proxies</a></td></tr><tr><td align="right"></td><td><a href="13fest.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Week 13 Test Results</span></a></td></tr><tr><td align="right"></td><td><a href="14.html" class="tocviewlink" data-pltdoc="x">14 &#8212;<wbr></wbr> Time to Reflect</a></td></tr><tr><td align="right"></td><td><a href="14fest.html" class="tocviewlink" data-pltdoc="x"><span style="color: red">Week 14 Memo Inspection Results</span></a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">11 &#8212;<wbr></wbr> Implementing the Tournament Manager</a></td></tr></table></div></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.1.0.8</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="10fest.html" title="backward to &quot;Week 10 Test Results&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="assignments.html" title="up to &quot;Projects, Specifics&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="11fest.html" title="forward to &quot;Week 11 Test Results&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4><a name="(part._11)"></a>11 &#8212;<wbr></wbr> Implementing the Tournament Manager</h4><a name="(part._chap~3a11)"></a><p><span style="font-weight: bold">Due</span> Monday, November 05, midnight</p><p><span style="font-weight: bold">Delivery</span> For this assignment, you will still place the design documents
into the <span class="stt">Design/</span> folder and Santorini-specific code into the appropriate
<span class="stt">Santorini/</span> sub-directory.</p><p>Place <span class="stt">xrun</span> and the <span class="stt">santorini.rc</span> test directory into your <span class="stt">11/</span> folder.</p><p><span style="font-style: italic">Optionally</span> your <span class="stt">11/</span> folder may contain a <span class="stt">Makefile</span>. If so,
we will run <span class="stt">make</span> to build your executables. The <span class="stt">make</span> process may
install libraries <span style="font-style: italic">but</span> if it downloads all of Al Gore&rsquo;s Internet, we
may preempt it.</p><p><span style="color: blue">Design Task</span> The time has come to plan for the last step: running remote
tournaments. That is, our Santorini company will run a Santorini tournament
manager on one machine and client computers will run AI players and connect to
the server via JSON messages over TCP.</p><p>Design a remote protocol for a Santorini tournament. A protocol consists of a
(series of) sequence diagram(s)&#8212;<wbr></wbr>like those in
<a href="server-spread.md">4/given-server-spread.md</a>&#8212;<wbr></wbr>plus an explanation of all the JSON
messages that cross from a client to the server and vice versa. You may wish to
sketch a sequence diagram per phase of a tournament. As for the JSON messages,
you may wish to borrow the formats from our past test specifications. Don&rsquo;t
forget to explain the meaning of each message.</p><p><span style="font-style: italic">Optional</span> Design an observer interface for the tournament manager.</p><p><span style="color: blue">Implementation Task</span> Implement a tournament manager, including a
configuration component for starting up a Santorini tournament.</p><p>A tournament manager is your first complete software system: it is
extensible (we can configure it with different kinds of players and
observers); it needs to deal with faulty components (bad players); it needs
to shut down gracefully, regardless of what happens over the course of
execution.</p><p>The tournament manager comes with a configuration component that reads
"programs" in a configuration "language" and then runs a complete
round-robin, every-player-against-every-other-player sequence of
meet-ups. For each meet-up, a referee supervises a best-of-3 series of
games. If something goes wrong during a meet-up, the referee informs the
tournament manager, which must implement a policy for failures.</p><p><span style="font-style: italic">Configuration</span> The tournament manager reads a configuration file
and configures the tournament according to the instructions in this file.</p><p><span style="font-weight: bold">Note</span> For <span style="font-style: italic">test-fest</span> purposes, your tournament manager reads the
configuration from <span class="stt">STDIN</span>. ~~ In real systems, the path for the
configuration file is specified as a command-line argument or is specified
as a default place in the file system.</p><p><div class="SIntrapara">The contents of the configuration file is a single JSON object of the
following shape:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt">{ "players"</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">: [[Kind, Name, PathString], ..., [Kind, Name, PathString]],</span></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;</span><span class="stt"></span><span class="hspace">&nbsp;&nbsp;</span><span class="stt">"observers" : [[Name, PathString], ..., [Name, PathString]]}</span></p></td></tr></table></div><div class="SIntrapara">that is, a hash table with two keys&#8212;<wbr></wbr><span class="stt">"players"</span> and
<span class="stt">"observers"</span>&#8212;<wbr></wbr>each mapped to an array of player and observer
specification, respectively. The specifications have the following meaning:
</div><div class="SIntrapara"><ul><li><p><div class="SIntrapara"><a name="(tech._kind)"></a><span style="font-style: italic">Kind</span> is one of:
</div><div class="SIntrapara"><ul><li><p><span class="stt">"good"</span>, meaning a player that is intended to be well-behaved;</p></li><li><p><span class="stt">"breaker"</span>, referring to a player that terminates in a timely
manner but misbehaves;</p></li><li><p><span class="stt">"infinite"</span>, denoting a player that goes into an infinite loop.</p></li></ul></div><div class="SIntrapara">If you haven&rsquo;t implemented the three kinds of players for <a href="9.html" data-pltdoc="x">9 &#8212;<wbr></wbr> Implementing the Referee</a>, do so
now.</div></p></li><li><p><span class="strike" style="text-decoration:line-through"><span style="font-style: italic">Name</span> is a JSON String; and</span></p></li><li><p><a name="(tech._pathstring)"></a><span style="font-style: italic">PathString</span> is a Linux Path to a dynamically loadable
component that implements the respective player or observer.</p></li></ul></div></p><p><span style="font-style: italic">Policy on Names</span> If the tournament manager discovers that several
players with the same name are to participate in a tournament, it picks a
unique name for all but one of the players and informs these players of the
chosen names.</p><p><div class="SIntrapara"><span style="font-style: italic">Policy on Broken Players</span> When a tournament manager is informed that a player
misbehaved, it acts as follows:
</div><div class="SIntrapara"><ul><li><p>The player is removed from all <span style="font-style: italic">future encounters</span>; there are no second chances.</p></li><li><p>All <span style="font-style: italic">past meet-ups</span> involving the player are counted as won by the opponent.</p></li><li><p><span style="color: red">If a player breaks after winning past games due to its
opponents' breakage, the game is eliminated from the tournament evaluation.</span></p></li></ul></div></p><p><div class="SIntrapara"><span style="font-style: italic">The End</span> When the tournament is over, the tournament manager
delivers two pieces of information:
</div><div class="SIntrapara"><ul><li><p>The first is a list of names of players that misbehaved in any
way. They are listed in the order of failure.</p></li><li><p>The second lists all completed games where each piece of game
information lists the winner&rsquo;s and the loser&rsquo;s name. The games are listed
in the order of "first plays against rest, second plays against rest,
etc."</p></li></ul></div></p><p><span style="color: blue">Test Harness</span> Since we do not have a complete software system yet, we
need a test harness.  Produce a test harness, named <span class="stt">xrun</span>, that runs a
complete tournament for one configuration, piped in from <span class="stt">STDIN</span>. Its
output, the result of calling the tournament manager, is rendered to
<span class="stt">STDOUT</span> as a JSON array of two arrays, the second of which contains one
array per game.</p><p><span style="color: blue">Testing Task</span> Develop a single system-level test to be used with your
test harness, i.e., the pair of files: <span class="stt">1-in.json</span> (for a configuration
object) and <span class="stt">1-out.json</span> (for the result). The configuration must
specify three players: one that behaves well, one that goes into an
infinite loop during placements, and one that goes into an infinite loop
during a turn; it does not specify any observers.</p><p><span style="font-weight: bold">Note</span> You may wish to create additional configuration files to
stress your tournament manager.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="10fest.html" title="backward to &quot;Week 10 Test Results&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="assignments.html" title="up to &quot;Projects, Specifics&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="11fest.html" title="forward to &quot;Week 11 Test Results&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>